<!--property loading-color="red"-->
<link rel="import" href="../bower_components/polymer/polymer.html">
<dom-module id="button-loading" >

  <style>
      :host {
          font-weight: normal;
          list-style: none outside none;
          text-decoration: none;
          text-indent: 0;
          overflow: hidden;
          -webkit-transition: all 0.5s;
          -moz-transition: all 0.5s;
          -ms-transition: all 0.5s;
          -o-transition: all 0.5s;
          transition: all 0.5s;
      }
      :host:focus
      {
          outline: 0;
      }
      :host([pressed]) {
          -webkit-border-radius: 50%;
          -moz-border-radius: 50%;
          border-radius: 50%;
          height:  var(--my-height-press, 50px);
          width:  var(--my-height-press, 50px);
          -webkit-transition: all 0.5s;
          -moz-transition: all  0.5s;
          -ms-transition: all  0.5s;
          -o-transition: all  0.5s;
          transition: all  0.5s;

      }
      :host  .loading{
          display: none;
          background-color: transparent;
          height:  100%;
          width:  100%;
          position: relative;

      }
      :host([pressed]) .loading {
          display: block;
      }
      :host([pressed]) .button-container
      {
          display: none;
      }
      :host .loading .loading-circle{
          position: absolute;                  
          top: 0;
          width: 0;
          height:  100%;
          width:  100%;
      }
      :host .loading .loading-circle:before {
          content: '';
          display: block;
          margin: 5% auto;
          width: 15%;
          height: 15%;
          background-color: var(--loading-color, #ffffff);
          border-radius: 100%;
          -webkit-animation: loadingFade 1.2s infinite ease-in-out both;
          -o-animation: loadingFade 1.2s infinite ease-in-out both;
          animation: loadingFade 1.2s infinite ease-in-out both;
          /*-webkit-animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;*/
          /*animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;*/
      }
      :host .loading .loading-circle.loading-circle-2{
          -webkit-transform: rotate(30deg);
          -moz-transform: rotate(30deg);
          -ms-transform: rotate(30deg);
          -o-transform: rotate(30deg);
          transform: rotate(30deg);
      }
      :host .loading .loading-circle.loading-circle-3{
          -webkit-transform: rotate(60deg);
          -moz-transform: rotate(60deg);
          -ms-transform: rotate(60deg);
          -o-transform: rotate(60deg);
          transform: rotate(60deg);
      }
      :host .loading .loading-circle.loading-circle-4{
          -webkit-transform: rotate(90deg);
          -moz-transform: rotate(90deg);
          -ms-transform: rotate(90deg);
          -o-transform: rotate(90deg);
          transform: rotate(90deg);
      }
      :host .loading .loading-circle.loading-circle-5{
          -webkit-transform: rotate(120deg);
          -moz-transform: rotate(120deg);
          -ms-transform: rotate(120deg);
          -o-transform: rotate(120deg);
          transform: rotate(120deg);
      }
      :host .loading .loading-circle.loading-circle-6{
          -webkit-transform: rotate(150deg);
          -moz-transform: rotate(150deg);
          -ms-transform: rotate(150deg);
          -o-transform: rotate(150deg);
          transform: rotate(150deg);
      }
      :host .loading .loading-circle.loading-circle-7{
          -webkit-transform: rotate(180deg);
          -moz-transform: rotate(180deg);
          -ms-transform: rotate(180deg);
          -o-transform: rotate(180deg);
          transform: rotate(180deg);
      }
      :host .loading .loading-circle.loading-circle-8{
          -webkit-transform: rotate(210deg);
          -moz-transform: rotate(210deg);
          -ms-transform: rotate(210deg);
          -o-transform: rotate(210deg);
          transform: rotate(210deg);
      }
      :host .loading .loading-circle.loading-circle-9{
          -webkit-transform: rotate(240deg);
          -moz-transform: rotate(240deg);
          -ms-transform: rotate(240deg);
          -o-transform: rotate(240deg);
          transform: rotate(240deg);
      }
      :host .loading .loading-circle.loading-circle-10{
          -webkit-transform: rotate(270deg);
          -moz-transform: rotate(270deg);
          -ms-transform: rotate(270deg);
          -o-transform: rotate(270deg);
          transform: rotate(270deg);
      }
      :host .loading .loading-circle.loading-circle-11{
          -webkit-transform: rotate(300deg);
          -moz-transform: rotate(300deg);
          -ms-transform: rotate(300deg);
          -o-transform: rotate(300deg);
          transform: rotate(300deg);
      }
      :host .loading .loading-circle.loading-circle-12{
          -webkit-transform: rotate(330deg);
          -moz-transform: rotate(330deg);
          -ms-transform: rotate(330deg);
          -o-transform: rotate(330deg);
          transform: rotate(330deg);
      }
      :host .loading .loading-circle.loading-circle-2:before{
          -webkit-animation-delay: -1.1s;
          -moz-animation-delay: -1.1s;
          -o-animation-delay: -1.1s;
          animation-delay: -1.1s;
      }
      :host .loading .loading-circle.loading-circle-3:before{
          -webkit-animation-delay: -1s;
          -moz-animation-delay: -1s;
          -o-animation-delay: -1s;
          animation-delay: -1s;
      }
      :host .loading .loading-circle.loading-circle-4:before{
          -webkit-animation-delay: -0.9s;
          -moz-animation-delay: -0.9s;
          -o-animation-delay: -0.9s;
          animation-delay: -0.9s;
      }
      :host .loading .loading-circle.loading-circle-5:before{
          -webkit-animation-delay: -0.8s;
          -moz-animation-delay: -0.8s;
          -o-animation-delay: -0.8s;
          animation-delay: -0.8s;
      }
      :host .loading .loading-circle.loading-circle-6:before{
          -webkit-animation-delay: -0.7s;
          -moz-animation-delay: -0.7s;
          -o-animation-delay: -0.7s;
          animation-delay: -0.7s;
      }
      :host .loading .loading-circle.loading-circle-7:before{
          -webkit-animation-delay: -0.6s;
          -moz-animation-delay: -0.6s;
          -o-animation-delay: -0.6s;
          animation-delay: -0.6s;
      }
      :host .loading .loading-circle.loading-circle-8:before{
          -webkit-animation-delay: -0.5s;
          -moz-animation-delay: -0.5s;
          -o-animation-delay: -0.5s;
          animation-delay: -0.5s;
      }
      :host .loading .loading-circle.loading-circle-9:before{
          -webkit-animation-delay: -0.4s;
          -moz-animation-delay: -0.4s;
          -o-animation-delay: -0.4s;
          animation-delay: -0.4s;
      }
      :host .loading .loading-circle.loading-circle-10:before{
          -webkit-animation-delay: -0.3s;
          -moz-animation-delay: -0.3s;
          -o-animation-delay: -0.3s;
          animation-delay: -0.3s;
      }
      :host .loading .loading-circle.loading-circle-11:before{
          -webkit-animation-delay: -0.2s;
          -moz-animation-delay: -0.2s;
          -o-animation-delay: -0.2s;
          animation-delay: -0.2s;
      }
      :host .loading .loading-circle.loading-circle-12:before{
          -webkit-animation-delay: -0.1s;
          -moz-animation-delay: -0.1s;
          -o-animation-delay: -0.1s;
          animation-delay: -0.1s;
      }
      @-webkit-keyframes loadingFade {
          0%, 39%, 100% { opacity: 0; }
          40% { opacity: 1; }
      }
      @-o-keyframes loadingFade {
          0%, 39%, 100% { opacity: 0; }
          40% { opacity: 1; }
      }
      @keyframes loadingFade {
          0%, 39%, 100% { opacity: 0; }
          40% { opacity: 1; }
      }

  </style>

    <template>
            <div class="button-container">
                <content></content>
            </div>
            <div class="loading">
                <div class="loading-circle loading-circle-1"></div>
                <div class="loading-circle loading-circle-2"></div>
                <div class="loading-circle loading-circle-3"></div>
                <div class="loading-circle loading-circle-4"></div>
                <div class="loading-circle loading-circle-5"></div>
                <div class="loading-circle loading-circle-6"></div>
                <div class="loading-circle loading-circle-7"></div>
                <div class="loading-circle loading-circle-8"></div>
                <div class="loading-circle loading-circle-9"></div>
                <div class="loading-circle loading-circle-10"></div>
                <div class="loading-circle loading-circle-11"></div>
                <div class="loading-circle loading-circle-12"></div>
            </div>
    </template>

</dom-module>

<script>

    Polymer({

        is: 'button-loading',
        extends: 'button',
        properties: {
            loadingColor: String,
            pressed: {
                type: Boolean,
                value: false,
                notify: true,
                reflectToAttribute: true
            }
        },
        listeners: {
            'tap': 'press'
        },
        attached: function() {
            this.customStyle['--my-height'] = this.offsetHeight + "px";
            this.customStyle['--my-width'] = this.offsetWidth + "px";
            if(this.loadingColor) this.customStyle['--loading-color'] =this.loadingColor;
            this.updateStyles();
        },
        press: function() {
            if(!this.pressed)
            {
                this.customStyle['--my-height-press'] = this.offsetHeight + "px";
                this.updateStyles();
                this.pressed = !this.pressed;
            }
        }
    });

</script>
